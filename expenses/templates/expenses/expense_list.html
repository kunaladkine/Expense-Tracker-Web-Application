{% extends "expenses/base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Expenses</h1>
  <a href="{% url 'expenses:expense_add' %}" class="btn btn-primary">Add Expense</a>
</div>

<form method="get" class="mb-3 row g-2">
  <div class="col-auto">
    <select name="category" class="form-select" onchange="this.form.submit()">
      <option value="">All categories</option>
      {% for c in categories %}
        <option value="{{ c.id }}" {% if request.GET.category == c.id|stringformat:"s" %}selected{% endif %}>{{ c.name }}</option>
      {% endfor %}
    </select>
  </div>
</form>

<table class="table table-striped table-hover">
  <thead class="table-light">
    <tr><th>Date</th><th>Title</th><th>Category</th><th>Amount</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for e in expenses %}
      <tr>
        <td>{{ e.date }}</td>
        <td>{{ e.title }}</td>
        <td>{{ e.category }}</td>
        <td>{{ e.amount }}</td>
        <td>
          <a class="btn btn-sm btn-outline-secondary" href="{% url 'expenses:expense_edit' e.pk %}">Edit</a>
          <a class="btn btn-sm btn-outline-danger" href="{% url 'expenses:expense_delete' e.pk %}">Delete</a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="5" class="text-center">No expenses yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
